{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reqCartList, reqDeleteCartById, reqUpdateChekedByid } from '@/api';\nconst state = {\n  cartList: []\n};\nconst mutations = {\n  GETCARTLIST(state, cartList) {\n    state.cartList = cartList;\n  }\n};\nconst actions = {\n  // 获取购物车列表数据\n  async getCartList({\n    commit\n  }) {\n    let result = await reqCartList();\n    if (result.code == 200) {\n      commit('GETCARTLIST', result.data);\n    }\n  },\n  // 删除购物车某一物品\n  async deleteCartListBySkuId({\n    commit\n  }, skyId) {\n    let result = await reqDeleteCartById(skyId);\n    if (result.code == 200) {\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  // 修改购物车选择状态\n  async updateChekedById({\n    commit\n  }, {\n    skuId,\n    isChecked\n  }) {\n    let result = await reqUpdateChekedByid(skuId, isChecked);\n    if (result.code == 200) {\n      return 'ok';\n    } else {\n      return new Promise.reject(new Error('faile'));\n    }\n  },\n  // 删除所有勾选的商品\n  deleteAllCheckedCart({\n    dispatch,\n    getters\n  }) {\n    // context可以理解为一个小仓库\n    // commit 提交mutations修改state    getters 计算属性    dispatch 派发action     state 当前仓库数据\n    let PromiseAll = [];\n    getters.cartList.cartInfoList.forEach(e => {\n      PromiseAll.push(e.isChecked == 1 ? dispatch('deleteCartListBySkuId', e.skuId) : '');\n    });\n    return Promise.all(PromiseAll);\n  },\n  // 修改全部产品的状态\n  updateAllCartIsChecked({\n    dispatch,\n    state\n  }, isChecked) {\n    let PromiseAll = [];\n    state.cartList.cartInfoList.forEach(e => {\n      PromiseAll.push(dispatch('updateChekedById', {\n        skuId: e.skuId,\n        isChecked\n      }));\n    });\n    return PromiseAll;\n  }\n};\nconst getters = {\n  cartList(state) {\n    return state.cartList[0] || {};\n  }\n};\nexport default {\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["reqCartList","reqDeleteCartById","reqUpdateChekedByid","state","cartList","mutations","GETCARTLIST","actions","getCartList","commit","result","code","data","deleteCartListBySkuId","skyId","Promise","reject","Error","updateChekedById","skuId","isChecked","deleteAllCheckedCart","dispatch","getters","PromiseAll","cartInfoList","forEach","e","push","all","updateAllCartIsChecked"],"sources":["C:/Web-Project/Project-SPH/app/src/store/shopcart/index.js"],"sourcesContent":["import {reqCartList,reqDeleteCartById,reqUpdateChekedByid} from '@/api'\r\n\r\nconst state = {\r\n    cartList:[]\r\n}\r\nconst mutations = {\r\n    GETCARTLIST(state,cartList){\r\n        state.cartList=cartList\r\n    }\r\n}\r\nconst actions = { \r\n    // 获取购物车列表数据\r\n    async getCartList({commit}){\r\n        let result = await reqCartList()\r\n        if(result.code==200){\r\n            commit('GETCARTLIST',result.data)\r\n        }\r\n    },\r\n    // 删除购物车某一物品\r\n    async deleteCartListBySkuId({commit},skyId){\r\n        let result = await reqDeleteCartById(skyId)\r\n        if(result.code==200){\r\n            return 'ok'\r\n        }\r\n        else{\r\n            return Promise.reject(new Error('faile'))\r\n        }\r\n    },\r\n    // 修改购物车选择状态\r\n    async updateChekedById({commit},{skuId,isChecked}){\r\n        let result = await reqUpdateChekedByid(skuId,isChecked)\r\n        if(result.code==200){\r\n            return 'ok'\r\n        }else{\r\n            return new Promise.reject(new Error('faile'))\r\n        }\r\n    },\r\n    // 删除所有勾选的商品\r\n    deleteAllCheckedCart({dispatch,getters}){\r\n        // context可以理解为一个小仓库\r\n        // commit 提交mutations修改state    getters 计算属性    dispatch 派发action     state 当前仓库数据\r\n        let PromiseAll = []\r\n        getters.cartList.cartInfoList.forEach(e=>{\r\n            PromiseAll.push(e.isChecked==1?dispatch('deleteCartListBySkuId',e.skuId):'')\r\n        })\r\n        return Promise.all(PromiseAll)\r\n    },\r\n    // 修改全部产品的状态\r\n    updateAllCartIsChecked({dispatch,state},isChecked){\r\n        let PromiseAll = []\r\n        state.cartList.cartInfoList.forEach(e=>{\r\n            PromiseAll.push(dispatch('updateChekedById',{skuId:e.skuId,isChecked}))\r\n        })\r\n        return PromiseAll\r\n    } \r\n\r\n}\r\nconst getters =  {\r\n    cartList(state){\r\n        return state.cartList[0]||{}\r\n    }\r\n}\r\n\r\n\r\nexport default{\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters\r\n}"],"mappings":";AAAA,SAAQA,WAAW,EAACC,iBAAiB,EAACC,mBAAmB,QAAO,OAAO;AAEvE,MAAMC,KAAK,GAAG;EACVC,QAAQ,EAAC;AACb,CAAC;AACD,MAAMC,SAAS,GAAG;EACdC,WAAW,CAACH,KAAK,EAACC,QAAQ,EAAC;IACvBD,KAAK,CAACC,QAAQ,GAACA,QAAQ;EAC3B;AACJ,CAAC;AACD,MAAMG,OAAO,GAAG;EACZ;EACA,MAAMC,WAAW,CAAC;IAACC;EAAM,CAAC,EAAC;IACvB,IAAIC,MAAM,GAAG,MAAMV,WAAW,EAAE;IAChC,IAAGU,MAAM,CAACC,IAAI,IAAE,GAAG,EAAC;MAChBF,MAAM,CAAC,aAAa,EAACC,MAAM,CAACE,IAAI,CAAC;IACrC;EACJ,CAAC;EACD;EACA,MAAMC,qBAAqB,CAAC;IAACJ;EAAM,CAAC,EAACK,KAAK,EAAC;IACvC,IAAIJ,MAAM,GAAG,MAAMT,iBAAiB,CAACa,KAAK,CAAC;IAC3C,IAAGJ,MAAM,CAACC,IAAI,IAAE,GAAG,EAAC;MAChB,OAAO,IAAI;IACf,CAAC,MACG;MACA,OAAOI,OAAO,CAACC,MAAM,CAAC,IAAIC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC7C;EACJ,CAAC;EACD;EACA,MAAMC,gBAAgB,CAAC;IAACT;EAAM,CAAC,EAAC;IAACU,KAAK;IAACC;EAAS,CAAC,EAAC;IAC9C,IAAIV,MAAM,GAAG,MAAMR,mBAAmB,CAACiB,KAAK,EAACC,SAAS,CAAC;IACvD,IAAGV,MAAM,CAACC,IAAI,IAAE,GAAG,EAAC;MAChB,OAAO,IAAI;IACf,CAAC,MAAI;MACD,OAAO,IAAII,OAAO,CAACC,MAAM,CAAC,IAAIC,KAAK,CAAC,OAAO,CAAC,CAAC;IACjD;EACJ,CAAC;EACD;EACAI,oBAAoB,CAAC;IAACC,QAAQ;IAACC;EAAO,CAAC,EAAC;IACpC;IACA;IACA,IAAIC,UAAU,GAAG,EAAE;IACnBD,OAAO,CAACnB,QAAQ,CAACqB,YAAY,CAACC,OAAO,CAACC,CAAC,IAAE;MACrCH,UAAU,CAACI,IAAI,CAACD,CAAC,CAACP,SAAS,IAAE,CAAC,GAACE,QAAQ,CAAC,uBAAuB,EAACK,CAAC,CAACR,KAAK,CAAC,GAAC,EAAE,CAAC;IAChF,CAAC,CAAC;IACF,OAAOJ,OAAO,CAACc,GAAG,CAACL,UAAU,CAAC;EAClC,CAAC;EACD;EACAM,sBAAsB,CAAC;IAACR,QAAQ;IAACnB;EAAK,CAAC,EAACiB,SAAS,EAAC;IAC9C,IAAII,UAAU,GAAG,EAAE;IACnBrB,KAAK,CAACC,QAAQ,CAACqB,YAAY,CAACC,OAAO,CAACC,CAAC,IAAE;MACnCH,UAAU,CAACI,IAAI,CAACN,QAAQ,CAAC,kBAAkB,EAAC;QAACH,KAAK,EAACQ,CAAC,CAACR,KAAK;QAACC;MAAS,CAAC,CAAC,CAAC;IAC3E,CAAC,CAAC;IACF,OAAOI,UAAU;EACrB;AAEJ,CAAC;AACD,MAAMD,OAAO,GAAI;EACbnB,QAAQ,CAACD,KAAK,EAAC;IACX,OAAOA,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAC,IAAE,CAAC,CAAC;EAChC;AACJ,CAAC;AAGD,eAAc;EACVD,KAAK;EACLE,SAAS;EACTE,OAAO;EACPgB;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}